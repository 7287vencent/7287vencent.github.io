(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{594:function(t,e,c){"use strict";c.r(e);var n=c(4),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[c("h3",{attrs:{id:"管理本地多个ssh-key"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#管理本地多个ssh-key"}},[t._v("#")]),t._v(" 管理本地多个SSH Key")]),t._v(" "),c("p",[t._v("有的时候，不仅Github使用ssh key，工作项目或者其他平台可能也需要使用ssh key来认证，如果每次都覆盖了原来的"),c("code",[t._v("id_rsa")]),t._v("文件，那么之前的认证就会失效。这个问题我们可以通过在"),c("code",[t._v("~/.ssh")]),t._v("目录下增加config文件来解决。(例如：配置git 和gitee 两个平台的ssh)")]),t._v(" "),c("p",[t._v("下面以配置Github的ssh key为例。")]),t._v(" "),c("p",[c("strong",[t._v("1. 生成ssh key时同时指定保存的文件名")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v('ssh-keygen -t rsa -f ~/.ssh/id_rsa.github -C "邮箱"\n# 其中xxx是你github平台的注册邮箱\nssh-keygen -t rsa -f ~/.ssh/id_rsa.gitee -C "邮箱"\n# 其中...是你gitee平台的注邮箱  \n')]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1608566439869-43950"}},[t._v("success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'ssh-keygen -t rsa -f ~/.ssh/id_rsa.github -C "邮箱"\n# 其中xxx是你github平台的注册邮箱\nssh-keygen -t rsa -f ~/.ssh/id_rsa.gitee -C "邮箱"\n# 其中...是你gitee平台的注邮箱  \n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1608566439869-43950","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"file",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])])])]),c("p",[t._v("上面的"),c("code",[t._v("id_rsa.github")]),t._v("和"),c("code",[t._v("id_rsa.gitee")]),t._v("就是我们指定的文件名，这时"),c("code",[t._v("~/.ssh")]),t._v("目录下会多出"),c("code",[t._v("id_rsa.github")]),t._v("，"),c("code",[t._v("id_rsa.github.pub")]),t._v("和"),c("code",[t._v("id_rsa.gitee")]),t._v("，"),c("code",[t._v("id_rsa.gitee.pub")]),t._v("四个文件，"),c("code",[t._v("id_rsa.github.pub")]),t._v("和"),c("code",[t._v("id_rsa.gitee.pub")]),t._v("里保存的就是我们要使用的key。也是需要配置到"),c("code",[t._v("github")]),t._v("和"),c("code",[t._v("gitee")]),t._v("上面的公钥")]),t._v(" "),c("p",[t._v("备注: 下面这段代码，可以不需要，在查看资料的时候发现了部分代码")]),t._v(" "),c("div",{staticClass:"language-js extra-class"},[c("pre",{pre:!0,attrs:{class:"language-js"}},[c("code",[c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 将生成的新keys添加到ssh agent\nssh"),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("agent bash\nssh"),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("add "),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssh"),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("id_rsa"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github\nssh"),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("add "),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssh"),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("id_rsa"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gitee\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1608566439870-61396"}},[t._v("success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"> 将生成的新keys添加到ssh agent\nssh-agent bash\nssh-add ~/.ssh/id_rsa.github\nssh-add ~/.ssh/id_rsa.gitee\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1608566439870-61396","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"file",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])])])]),c("p",[c("strong",[t._v("2. 配置ssh config文件，如果文件不存在就创建")]),t._v("\n添加如下内容（其中Host和HostName填写git服务器的域名，IdentityFile指定私钥的路径）")]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("> vim ~/.ssh/config\n### 新增下面这段代码\n# github\nHost github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/id_rsa.github\n# gitee\nHost gitee.com\nHostName gitee.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/id_rsa.gitee\n\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1608566439874-75675"}},[t._v("success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"> vim ~/.ssh/config\n### 新增下面这段代码\n# github\nHost github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/id_rsa.github\n# gitee\nHost gitee.com\nHostName gitee.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/id_rsa.gitee\n\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1608566439874-75675","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"file",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])])])]),c("p",[c("strong",[t._v("3. 在github 和 gitee上面添加公钥")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v(">github\nsetting > ssh and gpg keys > new ssh key\n>gitee\n**设置 > 安全设置 > SSH公钥 **\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1608566439874-501"}},[t._v("success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":">github\nsetting > ssh and gpg keys > new ssh key\n>gitee\n**设置 > 安全设置 > SSH公钥 **\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1608566439874-501","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"file",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])])])]),c("p",[c("strong",[t._v("4. 用ssh命令分别测试")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("> ssh -T git@gitee.com\n> ssh -T git@github.com\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1608566439874-39886"}},[t._v("success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"> ssh -T git@gitee.com\n> ssh -T git@github.com\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1608566439874-39886","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"file",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])])])]),c("p",[t._v("如果配置成功，则会显示：\nHi "),c("code",[t._v("username")]),t._v("! You’ve "),c("code",[t._v("successfully")]),t._v(" authenticated, but GitHub does not provide shell access.")])])}),[],!1,null,null,null);e.default=s.exports}}]);